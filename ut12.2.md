# UT12.2 Administraci√≥n de Linux: Comandos de gesti√≥n de cadenas

## Tuber√≠as y filtros

```tip
Desde la terminal de Linux posible introducir en una misma l√≠nea dos o m√°s comandos separados por el car√°cter **tuber√≠a** o pipe ‚Äò**\|**‚Äô ,conectando la salida est√°ndar de un comando con la entrada est√°ndar de otro.
```

![https://www.profesionalreview.com/wp-content/uploads/2017/02/tuber%C3%ADas.png](media/dd774f513a039dc83449dfcd5a678495.jpeg)

El uso m√°s habitual es filtrar datos utilizando comandos que vamos a ir viendo, y que pueden actuar tanto como comandos como filtros.

    comando1 | comando2 | ‚Ä¶

üí° La salida proporcionada por el comando1 se tomar√° como entrada para el comando2 y as√≠ sucesivamente

![](media/814cb79550188242261a5944d9ac529c.jpeg)

## Comando wc

```tip
El comando **wc** cuenta el n√∫mero de **l√≠neas, palabras y caracteres** de uno o m√°s fichero(s), incluye espacios en blanco y caracteres de salto de l√≠nea.
```

Su sintaxis es la siguiente: 

    wc [par√°metros] [fichero]

Donde sus par√°metros pueden ser:

    -l visualiza s√≥lo el n√∫mero de l√≠neas del fichero.
    -w visualiza s√≥lo el n√∫mero de palabras del fichero.
    -c visualiza s√≥lo el n√∫mero de caracteres del fichero.


![](media/3b813a2e5d9dc087798088fed0a95d7d.png)

## Comandos head y tail

```tip
El comando **head** muestra las 10 **primeras l√≠neas** de un fichero
```

![](media/2d14d3f04c2e01b260c8077608fcac2a.jpeg)

Si queremos especificar las l√≠neas a mostrar lo haremos con *head ‚Äìn n√∫mero*

```tip
El comando **tail** funciona de la misma forma, pero mostrando las 10 **√∫ltimas l√≠neas** de un fichero.
```

## Comando grep

```tip
El comando **grep** permite **buscar**, dentro de archivos o la salida que reciba de un tuber√≠a las l√≠neas que concuerden con el elemento que especifiquemos (un *patr√≥n de b√∫squeda*).
```

Es decir, **grep** muestra las l√≠neas que contienen la cadena o patr√≥n <u>resalt√°ndolo</u>. 

La sintaxis b√°sica del comando es la siguiente:

    grep [par√°metros] [patr√≥n_b√∫squeda] [fichero]

Donde par√°metros puede ser:

    -c visualiza el n¬∫ total de l√≠neas donde se localiza el patr√≥n.
    -i elimina la diferencia entre may√∫sculas y min√∫sculas.
    -l visualiza el nombre de los ficheros donde se localiza el patr√≥n.
    -n visualiza el n¬∫ de l√≠nea donde aparece el patr√≥n y l√≠nea completa
    -v** visualiza las l√≠neas del fichero donde **no** aparece el patr√≥n.
    -w obliga a que patr√≥n coincida solamente con palabras completas.

Se puede usar el comando grep para buscar con un patr√≥n usando lo que se conoce como **expresiones regulares b√°sicas**. Las expresiones regulares est√°n formadas por letras y n√∫meros, as√≠ como por caracteres.

Las <u>expresiones regulares</u> b√°sicas ya vistas incluyen:

| **S√≠mbolo** | **Descripci√≥n**                                      |
|-------------|------------------------------------------------------|
| .\*         | Para representar cero o m√°s caracteres.              |
| . (punto)   | Para representar un solo car√°cter                    |
| [a e i o u] | Para representar algunos caracteres                  |
| [A-Z][0-9]  | Para presentar un rango de caracteres                |
| **\^**      | **Para representar el inicio de una l√≠nea de texto** |
| **\$**      | **Para representar el fin de l√≠nea de texto**        |

Ejemplos de **expresiones regulares b√°sicas** que podemos usar con *grep*: 

- Un signo de intercalaci√≥n (\^) indica el <u>inicio de l√≠nea</u>:

        grep '^b' texto.txt 

- Un signo de d√≥lar (\$) indica el <u>fin de l√≠nea</u>:

        grep 'a$' texto.txt

- Para representar un car√°cter se utiliza el **.** y para m√∫ltiples car√°cteres el .\*

        grep 'f.cher.' grep 'tex.*'

- Los <u>rangos</u> se representan entre corchetes y los caracteres individuales separados por comas:

        grep [A-Z][a-z][a,e,i,o,u]

Algunos ejemplos usando el comando **grep**:

    # Buscar la cadena Texto en el fichero texto.txt
    grep "Texto" texto.txt
    # Visualizar el contenido de texto.txt y buscar la cadena hola
    cat texto.txt | grep "hola"
    # Cuenta las veces que aparece la cadena ‚Äúhola" en el fichero log.txt
    grep -c "Texto" log.txt
    # Verificar si un usuario existe en el sistema
    grep nombre_usuario /etc/passwd
    # Visualizar los archivos con permisos 777 (rwxrwxrwx)
    ls ‚Äìl | grep rwxrwxrwx


![](media/f788507ecdeb2a7ef3b16e6eeecab0cc.jpeg)

## Comandos sort y uniq

```tip
El comando **sort** se utiliza para ordenar l√≠neas de un fichero o un flujo, puede usarse como comando o como filtro.
```

Puede ordenar alfab√©tica o num√©ricamente, teniendo en cuenta que cada l√≠nea del fichero es un registro compuesto por varios campos, los cuales est√°n separados por un car√°cter denominado separador de campo (tabulador, espacio en blanco‚Ä¶)

Su sintaxis es: 

    sort [par√°metros] [fichero]

![](media/e4ab11230033e4d0273bca733641c184.png)

Con los siguientes par√°metros posibles:

    ‚Äìn ordenaci√≥n num√©rica
    ‚Äìk y un n¬∫ indicamos por qu√© columna ordenar
    ‚Äìr indicamos la ordenaci√≥n inversa


üí° Otro comando muy √∫til es **uniq.** Se usa en combinaci√≥n con **sort** para eliminar las l√≠neas que est√°n repetidas, dejando la salida con l√≠neas que no est√°n repetidas. Para que funcione correctamente las l√≠neas o ficheros deben estar ordenados, ya que trabaja con l√≠neas adyacentes.

![](media/547484050c9d23674080db6445943aa6.jpeg)

![](media/0a21ce98ca799c50e508d32ea74fd9cd.jpeg)

## Comando tr

```tip
El comando **tr** permite sustituir unos caracteres por otros dentro de un archivo. Primero especificamos lo que vamos a sustituir y seguidamente lo que lo sustituye.
```

Su sintaxis es:

    tr [par√°metros] caracteres1 [caracteres2]

Donde par√°metros puede ser:

    -d: elimina los caracteres indicados en caracteres1 .
    -s: reemplaza los caracteres indicados en caracteres1 .
    -c: los caracteres que no est√©n indicados en caracteres1 los convierte a caracteres2.

Algunos ejemplos √∫tiles con **tr**:

    # Eliminar los caracteres emp de la palabra ejemplo
    echo ejemplo | tr -d emp
    # Cambiar las min√∫sculas por may√∫sculas
    echo 'Hola Mundo' | tr '[a-z]' '[A-Z]' 
    # Suprimir espacios en blanco
    echo "Hola que tal ?" | tr -d ' '

## Comando cut

```tip
El comando **cut** es utilizado para la extracci√≥n de segmentos (o porciones) de las l√≠neas de texto. 
```

Dada una l√≠nea de texto la trocea seg√∫n el <u>separador o delimitador</u> que le indiquemos.


Su sintaxis es:

    cut [par√°metros] [fichero]

Donde par√°metros puede ser:

    -d car√°cter separador o delimitador
    -f rango o columna a extraer
    -c car√°cter a partir del cual cortar

Por ejemplo:

    # Coge las letras de las posiciones 2 a la 4 inclusive (esi)
    echo "mesilla" | cut -c 2-4
    # Cortar la cadena por la letra 'i' devolviendo la segunda parte (lla) 
    echo "mesilla" | cut -di -f2

Vamos a ver m√°s ejemplos t√≠picos del uso de **cut.** Dado un fichero de texto separado por espacios llamado *listado.txt* con el siguiente contenido:

    2020:Junio:23:Carla:Mart√≠nez:Equipo-de-b√°squet
    2021:Abril:22:Yoel:Alonso:Clases-de-danza
    2019:Febrero:21:Miguel:Molina:Equipo-de-b√°squet
    2022:Enero:22:Noelia:Bernabeu:Equipo-de-b√°squet
    2020:Mayo:11:Alberto:Silvestre:Clases-de-judo


Mostrar la primera columna:

![](media/03cbb65e4999cdb642f0c2fa2704cf5b.jpeg)

Mostrar la primera, cuarta y sexta columna:

![](media/91d35630e8e8a031f5cbef23bd20307d.jpeg)

## Comando awk

```tip
El comando **awk** es una herramienta avanzada de procesamiento de patrones en l√≠neas de texto. 
```

Su utilizaci√≥n est√°ndar es la de filtrar ficheros o salida de comandos de Linux, tratando las l√≠neas para, por ejemplo, mostrar unas determinadas columnas de informaci√≥n.

La sintaxis b√°sica de *awk* es:

    awk [condicion] { comandos }

*awk* es un comando avanzado que se estudiar√° en posteriores a√±os.

    # Mostrar s√≥lo los nombres y los tama√±os de los ficheros:
    ls -l | awk '{ print $8 ":" $5 }'

    # Mostrar s√≥lo los nombres y tama√±os de ficheros .txt:
    ls -l | awk '$8 ~ /\.txt/ { print $8 ":" $5 }'



---


Listado de comandos de **gesti√≥n de cadenas** destacados:

| **Comando** | **Acci√≥n**                                             | **Ejemplo**                 |
|-------------|--------------------------------------------------------|-----------------------------|
| **wc**      | contar el n¬∫ de l√≠neas, caracteres y de palabras.      | wc ‚Äìl fichero.txt           |
| **head**    | Visualiza las primeras filas de un fichero             | head -n5 /var/log/dmesg     |
| **tail**    | Visualiza las √∫ltimas filas de un fichero              | tail /var/log/dmesg         |
| **grep**    | buscar un patr√≥n en un fichero.                        | grep javier /etc/passwd     |
| **sort**    | ordenar el contenido de un fichero/listado.            | ls ‚Äìl \| sort               |
| **uniq**    | elimina filas duplicadas.                              | cat fichero \| uniq         |
| **tr**      | sustituir grupos de caracteres por otros indicados.    | tr 'abc' '123'              |
| **cut**     | cortar o extraer elementos de una l√≠nea de un fichero. | cut ‚Äìd ‚Äú:‚Äù -f 2             |
| **awk**     | herramienta de filtrado avanzado de texto              | ls -l \| awk '{print \$8"}' |
