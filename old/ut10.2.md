# UT10.2 Estructura de sistemas Linux

## Sistemas de archivos Linux

üí° Linux soporta una gran variedad de **sistemas de ficheros**, desde sistemas basados en discos nativos como pueden ser **ext2, ext3, ext4, ReiserFS**, **swap**, XFS, JFS, UFS, F2FS, ISO9660 y compatibilidad con FAT, FAT32 y recientemente NTFS.

Tambi√©n sistemas de ficheros que sirven para comunicar equipos en la **red** de diferentes sistemas operativos, como **NFS** (utilizado para compartir recursos entre equipos Linux) y el **SMB** (entre m√°quinas Linux y Windows).

El sistema de archivos indica el modo en que se gestionan los archivos dentro de las particiones. Seg√∫n su complejidad, tienen caracter√≠sticas como previsi√≥n de apagones, posibilidad de recuperar datos, indexaci√≥n para b√∫squedas r√°pidas, reducci√≥n de la fragmentaci√≥n para agilizar la lectura de los datos, etc.

La estructura del sistema operativo Linux en cuanto al almacenamiento de la informaci√≥n es m√°s compleja que la utilizada por Windows, siendo jer√°rquica en √°rbol invertido.

En Linux no hay l√≠mite en la cantidad de archivos y directorios a crear dentro de un directorio. La siguiente figura muestra un ejemplo de una estructura t√≠pica de directorios en el sistema Linux:

![](media/19f8d33bd596b428c77a2bc8a9eeae7e.png)

```warning
Recuerda que a la hora de diferenciar un fichero de otro, Linux **distingue may√∫sculas y min√∫sculas**, por lo que los ficheros "texto1.txt" y "Texto1.txt" son distintos.
```

La estructura interna del sistema de archivos de **Linux** es tambi√©n distinta a la de Windows:

-   El **superbloque** en Linux contiene informaci√≥n del sistema de archivos como el tama√±o de los bloques, tama√±o m√°ximo de archivos, espacio disponible y ocupado.
-   La **lista de inodos** almacena la informaci√≥n de cada archivo: identificador, tama√±o, propietario, permisos, fecha creaci√≥n/modificaci√≥n.

## Estructura de directorios

Las distribuciones Linux tienen todas un **√°rbol jer√°rquico o estructura de directorios** id√©ntico, muy similar a la estructura del sistema de archivos de plataformas UNIX.

Originariamente, en los inicios de Linux, este √°rbol de directorios ten√≠a diferencias de una distribuci√≥n a otra.

La falta de estandarizaci√≥n de los directorios de Linux fue solucionada por un grupo de trabajo compuesto por Rusty Russell, Daniel Quinlan y Christopher Yeoh, que entre otros creando el proyecto **FHS** *(Filesystem Hierarchy Standard)* en 1994-95 y usado en todas las distribuciones y sistemas Linux certificados actuales.

![](media/73549fc50c80f701864ba86816a6d6fa.png)

**FHS** establece que la **estructura de directorios de Linux** comienza a partir de un directorio ra√≠z que se simboliza con la barra ‚Äú**/**‚Äù.

De esta ra√≠z ‚Äòcuelgan‚Äô el resto de los archivos y directorios del sistema. No hay nada por encima de la ra√≠z y tampoco hay nada al lado de la ra√≠z.

![](media/a8eab917a4ac432f34e7ec5140336b34.jpeg)

Cualquier persona o instituci√≥n puede crear su propia **distribuci√≥n** Linux y ponerla en el mercado.

**FHS** nos dice c√≥mo tiene que ser la estructura de directorios y archivos para que una distro sea considerada Linux. Si nuestra distribuci√≥n no cumple con lo expresado por el est√°ndar, no ser√° considerada Linux, si no ‚Äú*basada‚Äù* en Linux.

**FHS** distingue entre varios tipos de directorios:

-   **Est√°ticos**: contienen binarios, bibliotecas, documentaci√≥n, cuyo contenido <u>solo puede ser modificado y alterado por el administrador del sistema</u>. El resto de usuarios podr√° s√≥lo leerlos.
-   **Din√°micos**: son aquellos directorios cuyo contenido puede modificarse libremente. Algunos son importantes, puesto que contienen documentos de los usuarios o configuraciones de estos.
-   **Compartidos**: son archivos que pueden compartirse entre uno o varios usuarios del sistema Linux.

![](media/f9cc44e21617decb74b1e8103cc61523.png)

Una particularidad de Linux es que todo dentro del sistema es o se representa mediante **archivos**.

Tanto el software como el hardware. Desde el rat√≥n, pasando por la impresora, el reproductor de DVD, el monitor, un directorio/subdirectorio y un fichero de texto.

Un Disco √≥ptico o una unidad USB se **monta** como un subdirectorio en el sistema de archivos. En ese subdirectorio se ubicar√° el contenido del disco compacto cuando est√© **montado** y, vac√≠o cuando est√© **desmontado**.

![](media/0e8a772e685f12891c18d13fecdfe20d.png)

- / (**Directorio ra√≠z**): Parecido a el directorio ra√≠z ‚Äú**C:\\**‚Äù de los sistemas operativos DOS y Windows. Es el nivel m√°s alto dentro de la jerarqu√≠a de directorios.

- **/bin/** Los binarios son los **ejecutables** de Linux (similar a los archivos **.exe** de Windows). Contiene los comandos de consola como ls, cp, date, echo, mkdir, rmdir..

- **/boot/** Archivos necesarios para el **inicio** de Linux, desde los archivos de configuraci√≥n del cargador de arranque (GRUB‚Äì LILO), hasta el propio **Kernel** del sistema.

- **/dev/** Este directorio contiene los **dispositivos hardware del sistema**, incluso los que no se les ha asignado (montado) un directorio, por ejemplo micr√≥fonos, impresoras, pendrives (memorias USB)

- **/proc/** Enlaces a los **procesos** en ejecuci√≥n del sistema e informaci√≥n de los trabajos internos de Linux.

- **/etc/** Aqu√≠ se guardan los principales **ficheros de configuraci√≥n** del sistema, as√≠ como scripts del inicio del sistema.

- **/home/** Re√∫ne los ficheros de **configuraci√≥n de usuario** as√≠ como los archivos personales del mismo (documentos, m√∫sica, videos, etc.), a excepci√≥n del superusuario (administrador, *root*) el cual cuenta con otro directorio aparte.

- **/lib/** Contiene las **bibliotecas** (librer√≠as) esenciales de los programas alojados, para el n√∫cleo, as√≠ como m√≥dulos y drivers.

- **/media/** Contiene los puntos de montaje de los **medios extra√≠bles** de almacenamiento. (CD-ROM , Pendrives o memorias USB), e incluso sirve para montar otras particiones del disco duro.

- **/mnt/** Se utiliza normalmente para montajes temporales de unidades. Es semejante a **/media**, pero usado por usuarios.

- **/sbin/** Sistema de binarios especial, comandos y programas exclusivos del superusuario (root).

- **/srv/** Aloja datos de servicios en red del sistema (servidores web, FTP, HTTP‚Ä¶)

- **/tmp/** Es un directorio donde se almacenan ficheros temporales. Cada vez que se inicia el sistema este directorio deber√≠a limpiarse.

- **/usr/** Contiene **archivos compartidos** usados por todos los usuarios del sistema, pero que no obstante son de s√≥lo lectura. Contiene programas no esenciales y utilidades usadas por los usuarios.

- **/root/** Directorio /home del administrador (solo para este). Es el √∫nico que no est√° incluido por defecto en el directorio **/home.**

- **/var/** Archivos que almacenan logs, correos electr√≥nicos o bases de datos.

![](media/c304b952dcf605f47a7e974ca186f081.jpeg)


Esquema de **particionamiento** est√°ndar recomendado y una **jerarqu√≠a** de ejemplo:

| **Partici√≥n** | **Tama√±o** |
|---------------|------------|
| **swap**      | = RAM      |
| **/boot**     | 250 MB     |
| **/**         | 30 GB      |
| **/home**     | ‚àû          |

![Interfaz de usuario gr√°fica  Descripci√≥n generada autom√°ticamente con confianza media](media/08912581400a0e7f43d5aee46e59d70d.png)

Cada vez que se a√±ade un dispositivo de almacenamiento en Linux se crea un fichero en la carpeta */dev/sdx*, siendo x una letra correlativa. Adem√°s tal y como hemos visto por cada partici√≥n que haya en el disco se crea adem√°s otro fichero */dev/sdxn*, donde n es un n√∫mero correlativo. 

Por ejemplo:

| **Unidad f√≠sica o l√≥gica**     | **Dispositivo Linux** | **Equivalente Windows** |
|--------------------------------|-----------------------|-------------------------|
| Disco primario                 | /dev/sda              | C:                      |
| Disco secundario               | /dev/sdb              | D:                      |
| Partici√≥n en el disco primario | /dev/sda1             | E:                      |



Tanto las letras como los n√∫meros se inicializan en cada arranque de forma que los nombres de los ficheros asociados a cada dispositivo pueden variar en cada momento. Para que una **partici√≥n** sea accesible esta debe **montarse** sobre un directorio.

Los dispositivos tipo pendrive se suelen montar autom√°ticamente en: */media/usuario/ETIQUETA_VOL*

-   Aquellas particiones que vayan a contener informaci√≥n sensible deber√≠an estar **cifradas** por cuestiones de seguridad. De esta manera, evitaremos que personas ajenas puedan acceder a la informaci√≥n contenida en esas particiones. Por regla general se deber√≠a considerar cifrar /home, como m√≠nimo.
-   El directorio /var es utilizado por diferentes aplicaciones, entre la que hay que destacar *Apache y MariaDB*. Hay que tener en cuenta este detalle a la hora de dimensionar el sistema.
-   En el caso de que haya diferentes usuarios es recomendable que /var y /tmp se encuentren en su propia partici√≥n.
-   En el caso del directorio de temporales /tmp, se puede controlar realizando limpiezas programadas para evitar tener problemas con que estos directorios lleguen a ocupar demasiado espacio. As√≠, se pueden utilizar aplicaciones como tmpreaper que elimina aquellos archivos a los que no se ha tenido acceso durante un determinado periodo de tiempo.
